/*!
 * powerSwitch.js by zhangxinxu(.com)
 * under MIT License
 * you can use powerSwitch to switch anything
*/
(function(b,c,d){var a=typeof history.pushState=="function";c.powerSwitch=function(f,e){c(f).powerSwitch(e)};c.extend(c.powerSwitch,{getRelative:function(f,h){f=c(f);if(f.length==0){return c()}var e=[],g=false;f.each(function(j,k){var i=c(this).attr(h.attribute)||(c(this).attr("href")||"").split("#")[1];if(i&&e[i]!=true){var l=c();if(/^\w+$/.test(i)){l=c("#"+i);if(l.length===0){l=c("."+i)}if(l.length===0){l=c(i)}}else{l=c(i)}l.each(function(m,n){e.push(n)});e[i]=true}else{if(e[i]==true){g=true}}});f.data("isMoreToOne",g);return c(e)},transition:function(h,g,f){var e="transform "+g+"ms linear";if(a==false){return}if(f==true){h.css("webkitTransition","none").css("transition","none");h.data("hasTransition",false)}else{if(!h.data("hasTransition")){h.css("webkitTransition","-webkit-"+e).css("transition",e);h.data("hasTransition",true)}}},translate:function(g,e,f){var h="translate"+e+"("+f+")";a?g.css("webkitTransform",h).css("transform",h):g.css(e=="X"?{left:f}:{top:f})},animation:function(p,h,k){var f=null,n=this,l=k.animation=="none";var i=function(t,r,s){if(parseInt(s)===s){s+="px"}if(a){n.transition(t,k.duration,l);n.translate(t,r,s)}else{t[l?"css":"animate"](r=="X"?{left:s}:{top:s},k.duration)}};if((h&&h.length)||(p&&p.length)){if(k.toggle==true&&k.animation=="translate"){k.animation="none"}switch(k.animation){case"translate":var j=p.data("index"),o=h.data("index");var g={vertical:"Y",horizontal:"X"};if(j!=d&&o!=d){var q=100,e=true;if(k.prevOrNext){switch(k.prevOrNext.attr("data-type")){case"prev":e=false;break;case"next":e=true;break;default:e=j<o}}q=(e*2-1)*100;n.transition(h.show(),k.duration,true);n.translate(h,g[k.direction],q+"%");setTimeout(function(){i(p,g[k.direction],-1*q+"%");i(h,g[k.direction],"0%")},17);k.prevOrNext=null}else{p.hide();h.show()}break;case"slide":if(p){p.slideUp(k.duration)}if(h){h.slideDown(k.duration)}break;case"fade":if(p){p.fadeOut(k.duration)}if(h){h.fadeIn(k.duration)}break;case"visibility":if(p){p.css("visibility","hidden")}if(h){h.css("visibility","visible")}break;default:if(p){p.hide()}if(h){h.show()}}}else{if(k.container&&k.container.length){var m=k.container.data("position");f=k.container.get(0);if(k.direction=="vertical"){if(f.scrollHeight-f.clientHeight>=Math.max(m.top,1)){k.animation=="auto"?k.container.animate({scrollTop:m.top}):k.container.scrollTop(m.top)}else{i(k.container,"Y",-1*m.top)}}else{if(f.scrollWidth-f.clientWidth>=Math.max(m.left,1)){k.animation=="auto"?k.container.animate({scrollLeft:m.left}):k.container.scrollLeft(m.left)}else{i(k.container,"X",-1*m.left)}}}}}});c.fn.powerSwitch=function(k){var r={direction:"horizontal",eventType:"click",classAdd:"",classRemove:"",classPrefix:"",attribute:"data-rel",animation:"auto",duration:250,container:null,autoTime:0,number:"auto",hoverDelay:200,toggle:false,onSwitch:c.noop};var y=c.extend({},r,k||{});c.each(["disabled","prev","play","pause","next"],function(B,D){var C="class"+D.slice(0,1).toUpperCase()+D.slice(1);if(y[C]===d){y[C]=y.classPrefix?[y.classPrefix,D].join("_"):D}});var A=y.indexSelected||-1,h=parseInt(y.number)||1,f=null,v=null,u=c(),l=0;var t=c(this);if(t.length==0){if(y.container==null||y.autoTime==0){return t}}u=c.powerSwitch.getRelative(t,y);if((l=u.length)==0){return t}if(A==-1&&y.toggle==false){if(y.classAdd){t.each(function(B,C){if(A!=-1){return}if(c(C).hasClass(y.classAdd)){A=B}})}else{u.each(function(B,C){if(A!=-1){return}if(y.animation=="visibility"){if(c(C).css("visibility")!="hidden"){A=B}}else{if(c(C).css("display")!="none"){A=B}}})}}var s=false,x=c(),z=c(),g=c();var m=function(B){if(B<=0){x.addClass(y.classDisabled).removeAttr("title").attr("disabled","disabled")}else{x.removeClass(y.classDisabled).attr("title",x.data("title")).removeAttr("disabled")}if((l-B)/h>1){z.removeClass(y.classDisabled).attr("title",z.data("title")).removeAttr("disabled")}else{z.addClass(y.classDisabled).removeAttr("title").attr("disabled","disabled")}};if(t.eq(0).data("isMoreToOne")==true){s=true;if(y.classDisabled){x=t.eq(0),z=t.eq(1);x.data("title",x.attr("title"));z.data("title",z.attr("title"));m(A);if(A<=0&&y.container){c(y.container).scrollLeft(0).scrollTop(0)}}else{u.clone().insertAfter(u.eq(l-1));u=c.powerSwitch.getRelative(t,y);g=t.eq(1)}}var w=false;if(t.length==1&&l>1){w=true}var q=function(F){var E=u.slice(F,F+h);var G=null,D=null,C=null;if(y.toggle==false){if(s==true){var B=E.position();y.container=c(y.container);y.container.data("position",B);c.powerSwitch.animation(null,null,y);y.classDisabled&&m(F);y.onSwitch.call(this,E)}else{if(w==true){c.powerSwitch.animation(null,E,y);y.onSwitch.call(this,E)}else{G=t.eq(A);D=t.eq(F);C=u.slice(A,A+h);D.addClass(y.classAdd).removeClass(y.classRemove);G.addClass(y.classRemove).removeClass(y.classAdd);c.powerSwitch.animation(C,E,y);y.onSwitch.call(this,E,G,C)}}A=F}else{if((y.animation=="visibility"&&E.css("visibility")=="hidden")||(y.animation!="visibility"&&E.css("display")=="none")){c.powerSwitch.animation(null,E,y);display=true}else{c.powerSwitch.animation(E,null,y);display=false}y.onSwitch.call(this,E,display)}};var e=location.href.split("#")[1];t.each(function(B,C){c(C).data("index",B);if(s==true){c(C).bind("click",function(){var E,D;if(y.classDisabled){if(c(this).attr("disabled")){return false}if(B==0){E=A-h;E=Math.max(0,E)}else{if(B==1){E=A+h;E=Math.min(E,l-1)}}q.call(this,E)}else{if(l>h){if(B==0){E=A-h;if(E<0){D=u.eq(A+l);c(y.container).data("position",D.position());c.powerSwitch.animation(null,null,c.extend({},y,{animation:"none"}));E=A+l-h}}else{if(B==1){E=A+h;if(E>l*2-h){D=u.eq(A-l);c(y.container).data("position",D.position());c.powerSwitch.animation(null,null,c.extend({},y,{animation:"none"}));E=A-l+h}}}q.call(this,E);g=c(this)}}return false})}else{if(w==true){c(C).bind("click",function(){var D;if(y.number=="auto"){h=l}if(!c(this).attr("disabled")){if(A==-1){D=0}else{D=A+h}q.call(this,D);if(D>=l-1){c(this).addClass(y.classDisabled).attr("disabled","disabled").removeAttr("title")}}return false})}else{if(y.eventType=="click"){c(C).bind("click",function(){y.prevOrNext=c(this);q.call(this,B);return false});if(e&&C.href&&e==C.href.split("#")[1]){c(C).trigger("click")}}else{if(/^hover|mouseover$/.test(y.eventType)){c(C).hover(function(){y.prevOrNext=c(this);clearTimeout(f);f=setTimeout(function(){q.call(C,B)},parseInt(y.hoverDelay)||0)},function(){clearTimeout(f)})}}}}});u.each(function(B,C){c(C).data("index",B)});var o=function(){var B=A+1;if(B>=l){B=0}q.call(t.get(B),B)},n=function(){var B=A-1;if(B<0){B=l-1}q.call(t.get(B),B)},p=function(){g.trigger("click")},j=function(){clearTimeout(v);if(j.flagAutoPlay==true){v=setTimeout(function(){s==false?o():p();j()},y.autoTime)}};if((w==false&&y.toggle==false&&s==false)||(s==true&&!y.classDisabled)){if(y.container&&s==false){var i="";t.length&&c.each(["Prev","Pause","Next"],function(B,C){if(y.autoTime==0&&C=="Pause"){return}i=i+'<a href="javascript:" class="'+y["class"+C]+'" data-type="'+C.toLowerCase()+'"></a>'});y.container.append(i).delegate("a","click",function(){var B=c(this).attr("data-type"),D=y["class"+B.slice(0,1).toUpperCase()+B.slice(1)],C=A;switch(B){case"prev":y.prevOrNext=c(this);n();break;case"play":j.flagAutoPlay=true;c(this).attr("data-type","pause").removeClass(D).addClass(y.classPause);j();break;case"pause":j.flagAutoPlay=false;c(this).attr("data-type","play").removeClass(D).addClass(y.classPlay);j();break;case"next":y.prevOrNext=c(this);o();break}})}if(y.autoTime){c.each([y.container,t,s==false?u:null],function(B,C){if(C){C.hover(function(){clearTimeout(v)},function(){j()})}});j.flagAutoPlay=true;j()}}return t}})(window,jQuery);