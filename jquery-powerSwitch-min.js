/*!
 * powerSwitch.js by zhangxinxu(.com)
 * you can use powerSwitch to switch anything
*/
(function(b,c,d){var a=typeof history.pushState=="function";c.powerSwitch=function(f,e){c(f).powerSwitch(e)};c.extend(c.powerSwitch,{getRelative:function(f,h){f=c(f);if(f.length==0){return c()}var e=[],g=false;f.each(function(j,k){var i=c(this).attr(h.attribute)||(c(this).attr("href")||"").split("#")[1];if(i&&e[i]!=true){var l=c();if(/^\w+$/.test(i)){l=c("#"+i);if(l.length===0){l=c("."+i)}if(l.length===0){l=c(i)}}else{l=c(i)}l.each(function(m,n){e.push(n)});e[i]=true}else{if(e[i]==true){g=true}}});f.data("isMoreToOne",g);return c(e)},animation:function(o,g,k){var e=null;var l=function(s,r){var q="transform "+k.duration+"ms linear";if(a==false){return}if(r==true){s.css("webkitTransition","none").css("transition","none");s.data("hasTransition",false)}else{if(!s.data("hasTransition")){s.css("webkitTransition","-webkit-"+q).css("transition",q);s.data("hasTransition",true)}}},i=function(s,q,r){var t="translate"+q+"("+r+")";a?s.css("webkitTransform",t).css("transform",t):s.css(q=="X"?{left:r}:{top:r})},h=function(s,q,r){if(parseInt(r)===r){r+="px"}if(a){l(s);i(s,q,r)}else{s.animate(q=="X"?{left:r}:{top:r},k.duration)}};if((g&&g.length)||(o&&o.length)){if(k.toggle==true&&k.animation=="translate"){k.animation="none"}switch(k.animation){case"translate":var j=o.data("index"),n=g.data("index");var f={vertical:"Y",horizontal:"X"};if(j!=d&&n!=d){var p=((j<n)*2-1)*100;if(k.autoTime>0&&!k.container){p=100}l(g.show(),true);i(g,f[k.direction],p+"%");setTimeout(function(){h(o,f[k.direction],-1*p+"%");h(g,f[k.direction],"0%")},17)}else{o.hide();g.show()}break;case"slide":if(o){o.slideUp(k.duration)}if(g){g.slideDown(k.duration)}break;case"fade":if(o){o.fadeOut(k.duration)}if(g){g.fadeIn(k.duration)}break;case"visibility":if(o){o.css("visibility","hidden")}if(g){g.css("visibility","visible")}break;default:if(o){o.hide()}if(g){g.show()}}}else{if(k.container&&k.container.length){var m=k.container.data("position");e=k.container.get(0);if(k.direction=="vertical"){if(e.scrollHeight-e.clientHeight>=Math.max(m.top,1)){k.animation=="auto"?k.container.animate({scrollTop:m.top}):k.container.scrollTop(m.top)}else{k.animation=="auto"?h(k.container,"Y",-1*m.top):k.container.css("top",-1*m.top)}}else{if(e.scrollWidth-e.clientWidth>=Math.max(m.left,1)){k.animation=="auto"?k.container.animate({scrollLeft:m.left}):k.container.scrollLeft(m.left)}else{k.animation=="auto"?h(k.container,"X",-1*m.left):k.container.css("left",-1*m.left)}}}}}});c.fn.powerSwitch=function(j){var p={direction:"horizontal",eventType:"click",classAdd:"",classRemove:"",classPrefix:"",attribute:"data-rel",animation:"auto",duration:250,container:null,autoTime:0,number:"auto",hoverDelay:200,toggle:false,onSwitch:c.noop};var w=c.extend({},p,j||{});c.each(["disabled","previous","play","pause","next"],function(z,B){var A="class"+B.slice(0,1).toUpperCase()+B.slice(1);w[A]=w[A]||(w.classPrefix?[w.classPrefix,B].join("_"):B)});var y=w.indexSelected||-1,g=parseInt(w.number)||1,f=null,t=null,s=c(),k=0;var r=c(this);if(r.length==0){if(w.container==null||w.autoTime==0){return r}}s=c.powerSwitch.getRelative(r,w);if((k=s.length)==0){return r}if(y==-1&&w.toggle==false){if(w.classAdd){r.each(function(z,A){if(y!=-1){return}if(c(A).hasClass(w.classAdd)){y=z}})}else{s.each(function(z,A){if(y!=-1){return}if(w.animation=="visibility"){if(c(A).css("visibility")!="hidden"){y=z}}else{if(c(A).css("display")!="none"){y=z}}})}}var q=false,v=c(),x=c();var l=function(z){if(z<=0){v.addClass(w.classDisabled).removeAttr("title").attr("disabled","disabled")}else{v.removeClass(w.classDisabled).attr("title",v.data("title")).removeAttr("disabled")}if((k-z)/g>1){x.removeClass(w.classDisabled).attr("title",x.data("title")).removeAttr("disabled")}else{x.addClass(w.classDisabled).removeAttr("title").attr("disabled","disabled")}};if(r.eq(0).data("isMoreToOne")==true){q=true;v=r.eq(0),x=r.eq(1);v.data("title",v.attr("title"));x.data("title",x.attr("title"));l(y);if(y<=0){c(w.container).scrollLeft(0).scrollTop(0)}}var u=false;if(r.length==1&&k>1){u=true}var o=function(D){var C=s.slice(D,D+g);var E=null,B=null,A=null;if(w.toggle==false){if(q==true){var z=C.position();w.container=c(w.container);w.container.data("position",z);c.powerSwitch.animation(null,null,w);l(D);w.onSwitch.call(this,C)}else{if(u==true){c.powerSwitch.animation(null,C,w);w.onSwitch.call(this,C)}else{E=r.eq(y);B=r.eq(D);A=s.slice(y,y+g);B.addClass(w.classAdd).removeClass(w.classRemove);E.addClass(w.classRemove).removeClass(w.classAdd);c.powerSwitch.animation(A,C,w);w.onSwitch.call(this,C,E,A)}}y=D}else{if((w.animation=="visibility"&&C.css("visibility")=="hidden")||(w.animation!="visibility"&&C.css("display")=="none")){c.powerSwitch.animation(null,C,w);display=true}else{c.powerSwitch.animation(C,null,w);display=false}w.onSwitch.call(this,C,display)}};var e=location.href.split("#")[1];r.each(function(z,A){c(A).data("index",z);if(q==true){c(A).bind("click",function(){var B;if(!c(this).attr("disabled")){if(z==0){B=y-g;B=Math.max(0,B)}else{if(z==1){B=y+g;B=Math.min(B,k-1)}}o.call(this,B)}return false})}else{if(u==true){c(A).bind("click",function(){var B;if(w.number=="auto"){g=k}if(!c(this).attr("disabled")){if(y==-1){B=0}else{B=y+g}o.call(this,B);if(B>=k-1){c(this).addClass(w.classDisabled).attr("disabled","disabled").removeAttr("title")}}return false})}else{if(w.eventType=="click"){c(A).bind("click",function(){o.call(this,z);return false});if(e&&A.href&&e==A.href.split("#")[1]){c(A).trigger("click")}}else{if(/^hover|mouseover$/.test(w.eventType)){c(A).hover(function(){clearTimeout(f);f=setTimeout(function(){o.call(A,z)},parseInt(w.hoverDelay)||0)},function(){clearTimeout(f)})}}}}});s.each(function(z,A){c(A).data("index",z)});var n=function(){var z=y+1;if(z>=k){z=0}o.call(r.get(z),z)},m=function(){var z=y-1;if(z<0){z=k-1}o.call(r.get(z),z)},i=function(){clearTimeout(t);if(i.flagAutoPlay==true){t=setTimeout(function(){n();i()},w.autoTime)}};if(w.autoTime&&w.toggle==false){if(w.container){var h="";r.length&&c.each(["Previous","Pause","Next"],function(z,A){h=h+'<a href="javascript:" class="'+w["class"+A]+'" data-type="'+A.toLowerCase()+'"></a>'});w.container.append(h).hover(function(){clearTimeout(t)},function(){i()}).delegate("a","click",function(){var z=c(this).attr("data-type"),B=w["class"+z.slice(0,1).toUpperCase()+z.slice(1)],A=y;switch(z){case"previous":m();break;case"play":i.flagAutoPlay=true;c(this).attr("data-type","pause").removeClass(B).addClass(w.classPause);i();break;case"pause":i.flagAutoPlay=false;c(this).attr("data-type","play").removeClass(B).addClass(w.classPlay);i();break;case"next":n();break}})}r.each(function(z,A){var B=c.powerSwitch.getRelative(A,w);c(A).hover(function(){clearTimeout(t)},function(){i()});B.hover(function(){clearTimeout(t)},function(){i()})});i.flagAutoPlay=true;i()}return r}})(window,jQuery);